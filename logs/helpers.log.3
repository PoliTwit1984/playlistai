2024-08-05 04:52:52,084 - DEBUG - Track data: {'album': {'album_type': 'album', 'artists': [{'external_urls': {'spotify': 'https://open.spotify.com/artist/06HL4z0CvFAxyc27GXpf02'}, 'href': 'https://api.spotify.com/v1/artists/06HL4z0CvFAxyc27GXpf02', 'id': '06HL4z0CvFAxyc27GXpf02', 'name': 'Taylor Swift', 'type': 'artist', 'uri': 'spotify:artist:06HL4z0CvFAxyc27GXpf02'}], 'external_urls': {'spotify': 'https://open.spotify.com/album/1NAmidJlEaVgA3MpcPFYGq'}, 'href': 'https://api.spotify.com/v1/albums/1NAmidJlEaVgA3MpcPFYGq', 'id': '1NAmidJlEaVgA3MpcPFYGq', 'images': [{'url': 'https://i.scdn.co/image/ab67616d0000b273e787cffec20aa2a396a61647', 'width': 640, 'height': 640}, {'url': 'https://i.scdn.co/image/ab67616d00001e02e787cffec20aa2a396a61647', 'width': 300, 'height': 300}, {'url': 'https://i.scdn.co/image/ab67616d00004851e787cffec20aa2a396a61647', 'width': 64, 'height': 64}], 'is_playable': True, 'name': 'Lover', 'release_date': '2019-08-23', 'release_date_precision': 'day', 'total_tracks': 18, 'type': 'album', 'uri': 'spotify:album:1NAmidJlEaVgA3MpcPFYGq'}, 'artists': [{'external_urls': {'spotify': 'https://open.spotify.com/artist/06HL4z0CvFAxyc27GXpf02'}, 'href': 'https://api.spotify.com/v1/artists/06HL4z0CvFAxyc27GXpf02', 'id': '06HL4z0CvFAxyc27GXpf02', 'name': 'Taylor Swift', 'type': 'artist', 'uri': 'spotify:artist:06HL4z0CvFAxyc27GXpf02'}], 'disc_number': 1, 'duration_ms': 178426, 'explicit': False, 'external_ids': {'isrc': 'USUG11901472'}, 'external_urls': {'spotify': 'https://open.spotify.com/track/1BxfuPKGuaTgP7aM0Bbdwr'}, 'href': 'https://api.spotify.com/v1/tracks/1BxfuPKGuaTgP7aM0Bbdwr', 'id': '1BxfuPKGuaTgP7aM0Bbdwr', 'is_local': False, 'is_playable': True, 'name': 'Cruel Summer', 'popularity': 92, 'preview_url': 'https://p.scdn.co/mp3-preview/dba15da5409f3c808022cf927c0ff8581f717aa4?cid=79306a3149224e13bf26129de10b37b0', 'track_number': 2, 'type': 'track', 'uri': 'spotify:track:1BxfuPKGuaTgP7aM0Bbdwr'}
2024-08-05 04:52:52,086 - DEBUG - User profile: {'display_name': 'Joe', 'external_urls': {'spotify': 'https://open.spotify.com/user/12939482'}, 'href': 'https://api.spotify.com/v1/users/12939482', 'id': '12939482', 'images': [{'url': 'https://i.scdn.co/image/ab67757000003b824e55c1645c4c81c525395175', 'height': 64, 'width': 64}, {'url': 'https://i.scdn.co/image/ab6775700000ee854e55c1645c4c81c525395175', 'height': 300, 'width': 300}], 'type': 'user', 'uri': 'spotify:user:12939482', 'followers': {'href': None, 'total': 2}, 'country': 'US', 'product': 'premium', 'explicit_content': {'filter_enabled': False, 'filter_locked': False}, 'email': 'joe.wilson@live.com'}
2024-08-05 04:52:52,086 - DEBUG - Adjusted score based on popularity: 0.54
2024-08-05 04:52:52,086 - DEBUG - Calling Spotify method: artist
2024-08-05 04:52:52,141 - DEBUG - Adjusted score based on artist popularity: 0.54
2024-08-05 04:52:52,141 - DEBUG - Fetching user's top genres
2024-08-05 04:52:52,141 - DEBUG - Calling Spotify method: current_user_top_artists
2024-08-05 04:52:52,396 - DEBUG - Successfully fetched 33 top genres
2024-08-05 04:52:52,396 - DEBUG - Calling Spotify method: artist
2024-08-05 04:52:52,456 - DEBUG - Adjusted score based on genre overlap: -0.1
2024-08-05 04:52:52,456 - DEBUG - Calling Spotify method: current_user_recently_played
2024-08-05 04:52:52,705 - DEBUG - Final discovery score: 0.44000000000000006
2024-08-05 04:52:52,705 - DEBUG - Discovery score calculated: 0.44000000000000006
2024-08-05 04:52:52,706 - DEBUG - Final track pool - Familiar tracks: 67, Discovery tracks: 67
2024-08-05 04:52:52,706 - DEBUG - Prepared track pool with 134 tracks
2024-08-05 04:52:52,720 - INFO - Entering generate_playlist function
2024-08-05 04:52:52,720 - DEBUG - Entering get_spotify_client function
2024-08-05 04:52:52,720 - DEBUG - Token info found: {'access_token': 'BQC0mAolTgMCIZZow3EGZ1Z3wGwPuLXO8qaB8LayTOq9unAyTOFGTWNxhTDSDjshBWsgHIKT6r1xPHEA5oSyT2sbaINbhOd5_TM0Y7yY9T3tQtNRVXrvBGal3jaOoU6is1zWpdTFDew7Oclfz8qk4WXPGvXtbXwEWod9ZAzItUbxA74fWQNtpb1pKagULW1VW09a31Oek6MeJXsm1q4crdONNzkirCqYK88OXi1ceTjoGH2YZmCmJSc', 'token_type': 'Bearer', 'expires_in': 3600, 'scope': 'user-library-read user-read-private user-read-email playlist-modify-private user-read-recently-played user-top-read user-read-currently-playing', 'expires_at': 1722855021, 'refresh_token': 'AQCdXsUtVJYsASMeYPRlXXKW2W8c09j4Kd200qku1E2-icepQIWZEep05UPTYoTgwEvaqFkyBehbZg6Mdh4X7vTzTYUbrObKFpuWApmOm9AEYOrUWob-apFd2C8tfWOQq3Y'}
2024-08-05 04:52:52,720 - DEBUG - Spotify client created successfully. Token expires in 3449 seconds
2024-08-05 04:52:52,720 - DEBUG - Available Spotify client methods: __class__, __del__, __delattr__, __dict__, __dir__, __doc__, __eq__, __format__, __ge__, __getattribute__, __getstate__, __gt__, __hash__, __init__, __init_subclass__, __le__, __lt__, __module__, __ne__, __new__, __reduce__, __reduce_ex__, __repr__, __setattr__, __sizeof__, __str__, __subclasshook__, __weakref__, _append_device_id, _auth, _auth_headers, _auth_manager, _build_session, _delete, _get, _get_id, _get_uri, _internal_call, _is_uri, _post, _put, _regex_base62, _regex_spotify_uri, _regex_spotify_url, _search_multiple_markets, _session, add_to_queue, album, album_tracks, albums, artist, artist_albums, artist_related_artists, artist_top_tracks, artists, audio_analysis, audio_features, auth_manager, available_markets, backoff_factor, categories, category, category_playlists, client_credentials_manager, country_codes, current_playback, current_user, current_user_follow_playlist, current_user_followed_artists, current_user_following_artists, current_user_following_users, current_user_playing_track, current_user_playlists, current_user_recently_played, current_user_saved_albums, current_user_saved_albums_add, current_user_saved_albums_contains, current_user_saved_albums_delete, current_user_saved_episodes, current_user_saved_episodes_add, current_user_saved_episodes_contains, current_user_saved_episodes_delete, current_user_saved_shows, current_user_saved_shows_add, current_user_saved_shows_contains, current_user_saved_shows_delete, current_user_saved_tracks, current_user_saved_tracks_add, current_user_saved_tracks_contains, current_user_saved_tracks_delete, current_user_top_artists, current_user_top_tracks, current_user_unfollow_playlist, currently_playing, default_retry_codes, devices, episode, episodes, featured_playlists, get_audiobook, get_audiobook_chapters, get_audiobooks, language, max_retries, me, new_releases, next, next_track, oauth_manager, pause_playback, playlist, playlist_add_items, playlist_change_details, playlist_cover_image, playlist_is_following, playlist_items, playlist_remove_all_occurrences_of_items, playlist_remove_specific_occurrences_of_items, playlist_reorder_items, playlist_replace_items, playlist_tracks, playlist_upload_cover_image, prefix, previous, previous_track, proxies, queue, recommendation_genre_seeds, recommendations, repeat, requests_timeout, retries, search, search_markets, seek_track, set_auth, show, show_episodes, shows, shuffle, start_playback, status_forcelist, status_retries, track, tracks, transfer_playback, user, user_follow_artists, user_follow_users, user_playlist, user_playlist_add_episodes, user_playlist_add_tracks, user_playlist_change_details, user_playlist_create, user_playlist_follow_playlist, user_playlist_is_following, user_playlist_remove_all_occurrences_of_tracks, user_playlist_remove_specific_occurrences_of_tracks, user_playlist_reorder_tracks, user_playlist_replace_tracks, user_playlist_tracks, user_playlist_unfollow, user_playlists, user_unfollow_artists, user_unfollow_users, volume
2024-08-05 04:52:52,720 - DEBUG - Playlist-related methods: category_playlists, current_user_follow_playlist, current_user_playlists, current_user_unfollow_playlist, featured_playlists, playlist, playlist_add_items, playlist_change_details, playlist_cover_image, playlist_is_following, playlist_items, playlist_remove_all_occurrences_of_items, playlist_remove_specific_occurrences_of_items, playlist_reorder_items, playlist_replace_items, playlist_tracks, playlist_upload_cover_image, user_playlist, user_playlist_add_episodes, user_playlist_add_tracks, user_playlist_change_details, user_playlist_create, user_playlist_follow_playlist, user_playlist_is_following, user_playlist_remove_all_occurrences_of_tracks, user_playlist_remove_specific_occurrences_of_tracks, user_playlist_reorder_tracks, user_playlist_replace_tracks, user_playlist_tracks, user_playlist_unfollow, user_playlists
2024-08-05 04:52:52,720 - DEBUG - Spotify client obtained
2024-08-05 04:52:52,720 - DEBUG - Track pool size: 134
2024-08-05 04:52:52,720 - DEBUG - User preferences: {'current_mood': 50, 'desired_mood': 50, 'activity': 'drive', 'energy_level': 50, 'time_of_day': 'Morning', 'discovery_level': 0.5, 'playlist_description': 'drive fun', 'selected_artists': ['adele'], 'selected_genres': ['rock']}
2024-08-05 04:52:52,720 - DEBUG - Form data: {'name': None, 'mood': '50', 'desired_mood': '50', 'activity': 'drive', 'energy_level': '50', 'time_of_day': 'Morning', 'duration_minutes': 30, 'num_tracks': 9, 'discovery_level': '50', 'favorite_artists': 'adele', 'favorite_genres': 'rock', 'playlist_description': 'drive fun', 'duration': '', 'selected_artists': '3qm84nBOXUEQ2vnTfUTTFC', 'selected_genres': 'pop', 'selected_wayback_tracks': '0ifSeVGUr7py5GggttDhXw'}
2024-08-05 04:52:52,720 - DEBUG - Calling get_openai_recommendations
2024-08-05 04:53:49,294 - DEBUG - OpenAI response received: 
```json
    {
      "playlist_description": "A balanced mix of familiar and undiscovered tracks tai...
2024-08-05 04:53:49,295 - DEBUG - Parsing OpenAI response
2024-08-05 04:53:49,295 - DEBUG - Starting to parse OpenAI response
